knitr::opts_chunk$set(echo = TRUE)
install.packages('refinr')
# turn off sci notation
options(scipen=999)
library(tidyverse)
library(lubridate)
library(refinr)
# Load data
md_grant_loans <- read_csv("data/State_of_Maryland_Grant_and_Loan_Data__FY2009_to_FY2022_20250115.csv")
# Display it
md_grant_loans
# Now let's try and group and count the number of expenditures by recipient. To make it a bit more manageable, let's use another string function from `stringr` and filter for recipients that start with the uppercase "W" or lowercase "w" using the function `str_detect()` with a regular expression.
# The filter function in the codeblock below says: look in the Grantee column, and pluck out any value that starts with (the "^" symbol means "starts with") a lowercase "w" OR (the vertical "|", called a pipe, means OR) an uppercase "W".
first <- md_grant_loans |>
group_by(Grantee) |>
summarise(
count=n()
) |>
filter(str_detect(Grantee, '^w|^W')) |>
arrange(desc(count))
cleaned_md_grant_loans <- md_grant_loans |>
mutate(grantee_clean=n_gram_merge(Grantee)) |>
select(Grantee, grantee_clean, everything())
cleaned_md_grant_loans
second <- cleaned_md_grant_loans |>
group_by(grantee_clean) |>
summarise(
count=n()
) |>
filter(str_detect(grantee_clean, '^w|^W')) |>
arrange(desc(count))
